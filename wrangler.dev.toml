# Cloudflare Container Manager - Local Development Configuration
# Use this file for local development with wrangler

name = "container-manager"
main = "worker/index.ts"
compatibility_date = "2025-01-01"
compatibility_flags = ["nodejs_compat"]

[dev]
port = 8787

[assets]
directory = "dist"
binding = "ASSETS"

# Local D1 database (created automatically)
[[d1_databases]]
binding = "METADATA"
database_name = "container-manager-metadata-local"
database_id = "local"

# Local R2 bucket (created automatically)
[[r2_buckets]]
binding = "SNAPSHOT_BUCKET"
bucket_name = "container-manager-snapshots-local"

# Durable Object for async operations
[[durable_objects.bindings]]
name = "SNAPSHOT_DO"
class_name = "SnapshotDO"

[[migrations]]
tag = "v1_snapshot_do"
new_classes = ["SnapshotDO"]

# Development secrets (use placeholder values)
[vars]
ACCOUNT_ID = "dev-account-id"
API_KEY = "dev-api-key"
TEAM_DOMAIN = "https://dev.cloudflareaccess.com"
POLICY_AUD = "dev-policy-aud"
